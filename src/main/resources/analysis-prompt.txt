【异常摘要】
- Message: {{exception_message}}

【关键堆栈（原文粘贴，尽量包含 cause by 段）】
{{stack_trace}}

【相关代码（可选，贴出可疑方法/类/配置片段）】
{{code_snippets}}

## 输出格式（只允许以下两节，按此 Markdown 结构输出）

### 最小可行修复（结果保证）

目标：立刻止血，保证对外可用与结果正确，可随时回滚

思路：在异常触发点增加容错/判空/默认值/超时/重试上限，尽量不改动上下游契约

验证：给出最小复现步骤 + 预期输出/日志关键字
回滚：说明一键关闭或回退的方式
证据缺口：若信息不足，请明确标注需要补充的内容（如原始响应片段/header/变量值）

---

### 最佳过程修复（业务保证）

目标：分析业务代码根因，提出可持续修复方案

思路：从源头分析业务逻辑 → 定位异常触发分支 → 思考流程合理性 → 提出修改建议（附类/方法/配置示例）

要求输出：
- 机制：解释为什么会发生（契约、逻辑分支、状态机缺口等）
- 改动点：具体修改的类/方法/配置，附代码或伪代码
- 验证：说明如何验证修改后的逻辑正确且不引入新问题
